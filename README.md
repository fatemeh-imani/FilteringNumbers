FilteringNumbers – Phase 4
هدف پروژه

هدف این مرحله افزایش انعطاف‌پذیری و کاهش وابستگی به کلاس‌ها و Interfaceهای متعدد است.
با استفاده از Delegate (Func<int,bool>)، می‌توان شرط‌های فیلتر را بدون ایجاد کلاس‌های جداگانه پیاده‌سازی کرد.

استفاده از Delegate به جای Interface

در نسخه‌های قبلی، برای فیلتر کردن اعداد از Interface مانند IFilter استفاده می‌شد.
اما در نسخه فعلی، به جای ساخت کلاس‌های متعدد و پیاده‌سازی Interface، از Delegate آماده (Func<int,bool>) استفاده شده است.

توضیح:
Func<int,bool> یک تابع است که یک عدد می‌گیرد و نتیجه‌ی true یا false برمی‌گرداند.
می‌توان هم از متد جداگانه استفاده کرد و هم شرط‌ها را به صورت Lambda مستقیم نوشت.

مزایای استفاده از Delegate

سادگی و کوتاه‌تر بودن کد

نیاز به تعریف کلاس یا Interface جدید برای هر شرط نیست.

انعطاف‌پذیری بالا

شرط‌ها را می‌توان به صورت Lambda یا متدهای جداگانه اعمال کرد.

قابلیت استفاده مجدد

چند شرط مختلف را بدون تغییر متد فیلتر می‌توان استفاده کرد.

خوانایی بهتر

کد مستقیم مشخص می‌کند که شرط چیست، بدون نیاز به مراجعه به کلاس‌های مختلف.

معایب و محدودیت‌ها

کاهش ساختار کلاسیک OOP

در پروژه‌های بزرگ، مدیریت شرط‌ها در کلاس‌ها ممکن است سخت‌تر شود.

محدودیت در ترکیب شرط‌ها

Lambda‌های طولانی برای شرط‌های پیچیده ممکن است خوانایی را کاهش دهند.

عدم امکان استفاده از polymorphism مستقیم

در Interface می‌توانستیم از ارث‌بری و پیاده‌سازی‌های مختلف استفاده کنیم، اما با Delegate فقط تابع ارسال می‌شود.

Overhead کوچک در عملکرد

هر بار که متد صدا زده می‌شود، یک فراخوانی اضافی دارد. در پروژه‌های کوچک قابل چشم‌پوشی است، اما در سیستم‌های بزرگ ممکن است کمی تأثیر داشته باشد.

نیاز به مدیریت بیشتر در تست‌ها

برای هر Lambda یا متد فیلتر، معمولاً تست واحد لازم است که باعث افزایش حجم تست‌ها و نگهداری آن‌ها می‌شود.

مزیت تست با delegate:

انعطاف‌پذیری بالاست. می‌توانی Lambda کوتاه یا متد جداگانه را تست کنی.

نیازی به ساخت کلاس‌های Interface اضافی برای تست نیست.